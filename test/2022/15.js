import assert from 'node:assert';
import { URL } from 'node:url';
import { readFile } from 'node:fs/promises';

import { a, b } from '../../2022/15.js';

describe('2022_15', () => {
  let input;

  it('read input', async () => {
    const filePath = new URL('./input/15.txt', import.meta.url);
    const contents = await readFile(filePath, { encoding: 'utf8' });

    input = contents
      .split('\n');
  });

  it('test A', () => {
    let result = a([
      [[2, 18], [-2, 15]],
      [[9, 16], [10, 16]],
      [[13, 2], [15, 3]],
      [[12, 14], [10, 16]],
      [[10, 20], [10, 16]],
      [[14, 17], [10, 16]],
      [[8, 7], [2, 10]],
      [[2, 0], [2, 10]],
      [[0, 11], [2, 10]],
      [[20, 14], [25, 17]],
      [[17, 20], [21, 22]],
      [[16, 7], [15, 3]],
      [[14, 3], [15, 3]],
      [[20, 1], [15, 3]],
    ], 10);
    assert.equal(result, 26);
  });

  it('solve A', () => {
    let result = a([
      [[2332081, 2640840], [2094728, 2887414]],
      [[3048293, 3598671], [3872908, 3598272]],
      [[2574256, 3973583], [2520711, 4005929]],
      [[3011471, 2514567], [2999559, 2558817]],
      [[3718881, 2593817], [2999559, 2558817]],
      [[2388052, 2201955], [2163809, 1961540]],
      [[3783125, 3897169], [3872908, 3598272]],
      [[1864613, 3918152], [2520711, 4005929]],
      [[2850099, 689863], [3231146, 2000000]],
      [[3431652, 2328669], [3231146, 2000000]],
      [[3480248, 3999492], [3872908, 3598272]],
      [[455409, 3347614], [-399822, 4026621]],
      [[2451938, 2950107], [2094728, 2887414]],
      [[1917790, 3194437], [2094728, 2887414]],
      [[3947393, 3625984], [3872908, 3598272]],
      [[1615064, 2655330], [2094728, 2887414]],
      [[3630338, 1977851], [3231146, 2000000]],
      [[3878266, 3019867], [3872908, 3598272]],
      [[2837803, 2395749], [2999559, 2558817]],
      [[3979396, 3697962], [3872908, 3598272]],
      [[109399, 250528], [929496, -688981]],
      [[2401381, 3518884], [2520711, 4005929]],
      [[3962391, 71053], [5368730, -488735]],
      [[1751119, 97658], [929496, -688981]],
      [[2932155, 2967347], [2999559, 2558817]],
      [[3326630, 2845463], [2999559, 2558817]],
      [[3959042, 1734156], [3231146, 2000000]],
      [[675279, 1463916], [2163809, 1961540]],
      [[3989603, 3500749], [3872908, 3598272]],
      [[1963470, 2288355], [2163809, 1961540]]
    ], 2_000_000);
    assert.equal(result, 5461729);
  });

  it('test B', () => {
    let result = b([
      [[2, 18], [-2, 15]],
      [[9, 16], [10, 16]],
      [[13, 2], [15, 3]],
      [[12, 14], [10, 16]],
      [[10, 20], [10, 16]],
      [[14, 17], [10, 16]],
      [[8, 7], [2, 10]],
      [[2, 0], [2, 10]],
      [[0, 11], [2, 10]],
      [[20, 14], [25, 17]],
      [[17, 20], [21, 22]],
      [[16, 7], [15, 3]],
      [[14, 3], [15, 3]],
      [[20, 1], [15, 3]],
    ], 20);
    assert.equal(result, 56000011);
  });

  it('solve B', () => {
    const result = b([
      [[2332081, 2640840], [2094728, 2887414]],
      [[3048293, 3598671], [3872908, 3598272]],
      [[2574256, 3973583], [2520711, 4005929]],
      [[3011471, 2514567], [2999559, 2558817]],
      [[3718881, 2593817], [2999559, 2558817]],
      [[2388052, 2201955], [2163809, 1961540]],
      [[3783125, 3897169], [3872908, 3598272]],
      [[1864613, 3918152], [2520711, 4005929]],
      [[2850099, 689863], [3231146, 2000000]],
      [[3431652, 2328669], [3231146, 2000000]],
      [[3480248, 3999492], [3872908, 3598272]],
      [[455409, 3347614], [-399822, 4026621]],
      [[2451938, 2950107], [2094728, 2887414]],
      [[1917790, 3194437], [2094728, 2887414]],
      [[3947393, 3625984], [3872908, 3598272]],
      [[1615064, 2655330], [2094728, 2887414]],
      [[3630338, 1977851], [3231146, 2000000]],
      [[3878266, 3019867], [3872908, 3598272]],
      [[2837803, 2395749], [2999559, 2558817]],
      [[3979396, 3697962], [3872908, 3598272]],
      [[109399, 250528], [929496, -688981]],
      [[2401381, 3518884], [2520711, 4005929]],
      [[3962391, 71053], [5368730, -488735]],
      [[1751119, 97658], [929496, -688981]],
      [[2932155, 2967347], [2999559, 2558817]],
      [[3326630, 2845463], [2999559, 2558817]],
      [[3959042, 1734156], [3231146, 2000000]],
      [[675279, 1463916], [2163809, 1961540]],
      [[3989603, 3500749], [3872908, 3598272]],
      [[1963470, 2288355], [2163809, 1961540]]
    ], 4_000_000);
    assert.equal(result, 10621647166538);
  });
});
